{"version":3,"sources":["webpack:///./node_modules/maptalks.routeplayer/dist/maptalks.routeplayer.es.js","webpack:///src/views/map/maptalks/routerplay.vue","webpack:///./src/views/map/maptalks/routerplay.vue?ce76","webpack:///./src/views/map/maptalks/routerplay.vue"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_inherits","subClass","superClass","TypeError","create","constructor","value","setPrototypeOf","obj","defaults","keys","getOwnPropertyNames","getOwnPropertyDescriptor","undefined","_defaults","_classCallCheck","instance","maptalks_routeplayer_es_Route","Route","r","this","route","path","getCoordinates","t","map","getStart","getEnd","idx","l","p1","p2","x","y","coord","maptalks_es","vp","coordinateToViewPoint","coordinate","viewPoint","degree","computeDegree","index","getCount","get","markerSymbol","set","symbol","_painter","marker","setSymbol","lineSymbol","line","maptalks_routeplayer_es_RoutePlayer","_maptalks$Eventable","RoutePlayer","routes","opts","_this","self","call","ReferenceError","_possibleConstructorReturn","Array","isArray","id","UID","_map","_setup","remove","markerLayer","finish","lineLayer","play","player","playState","fire","pause","cancel","played","_createPlayer","_step","styles","getStartTime","startTime","getEndTime","endTime","getCurrentTime","setTime","_resetPlayer","getUnitTime","options","setUnitTime","ut","getCurrentCoordinates","getMarkerSymbol","setMarkerSymbol","getLineSymbol","setLineSymbol","playing","frame","state","duration","_drawRoute","coordinates","setCoordinates","addTo","rs","start","end","_createLayers","framer","renderer","_getRenderer","callInFrameLoop","fn","Animation","animate","speed","easing","bind","mergeOptions","unitTime","showRoutes","lineWidth","lineColor","console","log","routerplay","initmap","createRouter","center","zoom","urlTemplate","attribution","maptalks_routerplay","render","_vm","_h","$createElement","_c","_self","attrs","_v","on","click","speed1","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.71d0b64f9e5ae28c0fcc.js","sourcesContent":["/*!\n * maptalks.routeplayer v0.1.0\n * LICENSE : MIT\n * (c) 2016-2018 maptalks.org\n */\n/*!\n * requires maptalks@^0.23.0 \n */\nimport { Class, Coordinate, Eventable, INTERNAL_LAYER_PREFIX, LineString, Marker, Util, VectorLayer, animation } from 'maptalks';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Route = function () {\n    function Route(r) {\n        _classCallCheck(this, Route);\n\n        this.route = r;\n        this.path = r.path;\n    }\n\n    Route.prototype.getCoordinates = function getCoordinates(t, map) {\n        if (t < this.getStart() || t > this.getEnd()) {\n            return null;\n        }\n        var idx = null;\n        for (var i = 0, l = this.path.length; i < l; i++) {\n            if (t < this.path[i][2]) {\n                idx = i;\n                break;\n            }\n        }\n        if (idx === null) {\n            idx = this.path.length - 1;\n        }\n        var p1 = this.path[idx - 1],\n            p2 = this.path[idx],\n            span = t - p1[2],\n            r = span / (p2[2] - p1[2]);\n        var x = p1[0] + (p2[0] - p1[0]) * r,\n            y = p1[1] + (p2[1] - p1[1]) * r,\n            coord = new Coordinate(x, y),\n            vp = map.coordinateToViewPoint(coord);\n        var degree = Util.computeDegree(map.coordinateToViewPoint(new Coordinate(p1)), vp);\n        return {\n            'coordinate': coord,\n            'viewPoint': vp,\n            'degree': degree,\n            'index': idx\n        };\n    };\n\n    Route.prototype.getStart = function getStart() {\n        return this.path[0][2];\n    };\n\n    Route.prototype.getEnd = function getEnd() {\n        return this.path[this.getCount() - 1][2];\n    };\n\n    Route.prototype.getCount = function getCount() {\n        return this.path.length;\n    };\n\n    _createClass(Route, [{\n        key: 'markerSymbol',\n        get: function get() {\n            return this.route.markerSymbol;\n        },\n        set: function set(symbol) {\n            this.route.markerSymbol = symbol;\n            if (this._painter && this._painter.marker) {\n                this._painter.marker.setSymbol(symbol);\n            }\n        }\n    }, {\n        key: 'lineSymbol',\n        get: function get() {\n            return this.route.lineSymbol;\n        },\n        set: function set(symbol) {\n            this.route.lineSymbol = symbol;\n            if (this._painter && this._painter.marker) {\n                this._painter.line.setSymbol(symbol);\n            }\n        }\n    }]);\n\n    return Route;\n}();\n\nvar options = {\n    'unitTime': 1 * 1000,\n    'showRoutes': true,\n    'markerSymbol': null,\n    'lineSymbol': {\n        'lineWidth': 2,\n        'lineColor': '#004A8D'\n    }\n};\n\nvar RoutePlayer = function (_maptalks$Eventable) {\n    _inherits(RoutePlayer, _maptalks$Eventable);\n\n    function RoutePlayer(routes, map, opts) {\n        _classCallCheck(this, RoutePlayer);\n\n        var _this = _possibleConstructorReturn(this, _maptalks$Eventable.call(this, opts));\n\n        if (!Array.isArray(routes)) {\n            routes = [routes];\n        }\n        _this.id = Util.UID();\n        _this._map = map;\n        _this._setup(routes);\n        return _this;\n    }\n\n    RoutePlayer.prototype.remove = function remove() {\n        if (!this.markerLayer) {\n            return this;\n        }\n        this.finish();\n        this.markerLayer.remove();\n        this.lineLayer.remove();\n        delete this.markerLayer;\n        delete this.lineLayer;\n        delete this._map;\n        return this;\n    };\n\n    RoutePlayer.prototype.play = function play() {\n        if (this.player.playState === 'running') {\n            return this;\n        }\n        this.player.play();\n        this.fire('playstart');\n        return this;\n    };\n\n    RoutePlayer.prototype.pause = function pause() {\n        if (this.player.playState === 'paused') {\n            return this;\n        }\n        this.player.pause();\n        this.fire('playpause');\n        return this;\n    };\n\n    RoutePlayer.prototype.cancel = function cancel() {\n        this.player.cancel();\n        this.played = 0;\n        this._createPlayer();\n        this._step({ 'styles': { 't': 0 } });\n        this.fire('playcancel');\n        return this;\n    };\n\n    RoutePlayer.prototype.finish = function finish() {\n        if (this.player.playState === 'finished') {\n            return this;\n        }\n        this.player.finish();\n        this._step({ 'styles': { 't': 1 } });\n        this.fire('playfinish');\n        return this;\n    };\n\n    RoutePlayer.prototype.getStartTime = function getStartTime() {\n        return this.startTime || 0;\n    };\n\n    RoutePlayer.prototype.getEndTime = function getEndTime() {\n        return this.endTime || 0;\n    };\n\n    RoutePlayer.prototype.getCurrentTime = function getCurrentTime() {\n        if (!this.played) {\n            return this.startTime;\n        }\n        return this.startTime + this.played;\n    };\n\n    RoutePlayer.prototype.setTime = function setTime(t) {\n        this.played = t - this.startTime;\n        if (this.played < 0) {\n            this.played = 0;\n        }\n        this._resetPlayer();\n        return this;\n    };\n\n    RoutePlayer.prototype.getUnitTime = function getUnitTime() {\n        return this.options['unitTime'];\n    };\n\n    RoutePlayer.prototype.setUnitTime = function setUnitTime(ut) {\n        this.options['unitTime'] = +ut;\n        this._resetPlayer();\n    };\n\n    RoutePlayer.prototype.getCurrentCoordinates = function getCurrentCoordinates(index) {\n        if (!index) {\n            index = 0;\n        }\n        if (!this.routes[index] || !this.routes[index]._painter) {\n            return null;\n        }\n        return this.routes[index]._painter.marker.getCoordinates();\n    };\n\n    RoutePlayer.prototype.getMarkerSymbol = function getMarkerSymbol(idx) {\n        if (this.routes && this.routes[idx]) {\n            return this.routes[idx].markerSymbol;\n        }\n        return null;\n    };\n\n    RoutePlayer.prototype.setMarkerSymbol = function setMarkerSymbol(idx, symbol) {\n        if (this.routes && this.routes[idx]) {\n            this.routes[idx].markerSymbol = symbol;\n        }\n        return this;\n    };\n\n    RoutePlayer.prototype.getLineSymbol = function getLineSymbol(idx) {\n        if (this.routes && this.routes[idx]) {\n            return this.routes[idx].lineSymbol;\n        }\n        return null;\n    };\n\n    RoutePlayer.prototype.setLineSymbol = function setLineSymbol(idx, symbol) {\n        if (this.routes && this.routes[idx]) {\n            this.routes[idx].lineSymbol = symbol;\n        }\n        return this;\n    };\n\n    RoutePlayer.prototype._resetPlayer = function _resetPlayer() {\n        var playing = this.player && this.player.playState === 'running';\n        if (playing) {\n            this.player.finish();\n        }\n        this._createPlayer();\n        if (playing) {\n            this.player.play();\n        }\n    };\n\n    RoutePlayer.prototype._step = function _step(frame) {\n        if (frame.state && frame.state.playState !== 'running') {\n            if (frame.state.playState === 'finished') {\n                this.fire('playfinish');\n            }\n            return;\n        }\n        this.played = this.duration * frame.styles.t;\n        for (var i = 0, l = this.routes.length; i < l; i++) {\n            this._drawRoute(this.routes[i], this.startTime + this.played);\n        }\n        this.fire('playing');\n    };\n\n    RoutePlayer.prototype._drawRoute = function _drawRoute(route, t) {\n        if (!this._map) {\n            return;\n        }\n        var coordinates = route.getCoordinates(t, this._map);\n        if (!coordinates) {\n            if (route._painter && route._painter.marker) {\n                route._painter.marker.remove();\n                delete route._painter.marker;\n            }\n            return;\n        }\n        if (!route._painter) {\n            route._painter = {};\n        }\n        if (!route._painter.marker) {\n            var marker = new Marker(coordinates.coordinate, {\n                symbol: route.markerSymbol || this.options['markerSymbol']\n            }).addTo(this.markerLayer);\n            route._painter.marker = marker;\n        } else {\n            route._painter.marker.setCoordinates(coordinates.coordinate);\n        }\n        if (!route._painter.line) {\n            var line = new LineString(route.path, {\n                symbol: route.lineSymbol || this.options['lineSymbol']\n            }).addTo(this.lineLayer);\n\n            route._painter.line = line;\n        }\n    };\n\n    RoutePlayer.prototype._setup = function _setup(rs) {\n        var routes = rs.map(function (r) {\n            return new Route(r);\n        });\n        var start = routes[0].getStart(),\n            end = routes[0].getEnd();\n        for (var i = 1; i < routes.length; i++) {\n            var route = routes[i];\n            if (route.getStart() < start) {\n                start = route.getStart();\n            }\n            if (route.getEnd() > end) {\n                end = route.getEnd();\n            }\n        }\n        this.routes = routes;\n        this.startTime = start;\n        this.endTime = end;\n        this.played = 0;\n        this.duration = end - start;\n        this._createLayers();\n        this._createPlayer();\n    };\n\n    RoutePlayer.prototype._createPlayer = function _createPlayer() {\n        var duration = (this.duration - this.played) / this.options['unitTime'];\n        var framer = void 0;\n        var renderer = this._map._getRenderer();\n        if (renderer.callInFrameLoop) {\n            framer = function framer(fn) {\n                renderer.callInFrameLoop(fn);\n            };\n        }\n        this.player = animation.Animation.animate({\n            't': [this.played / this.duration, 1]\n        }, {\n            'framer': framer,\n            'speed': duration,\n            'easing': 'linear'\n        }, this._step.bind(this));\n    };\n\n    RoutePlayer.prototype._createLayers = function _createLayers() {\n        this.lineLayer = new VectorLayer(INTERNAL_LAYER_PREFIX + '_routeplay_r_' + this.id).addTo(this._map);\n        this.markerLayer = new VectorLayer(INTERNAL_LAYER_PREFIX + '_routeplay_m_' + this.id).addTo(this._map);\n    };\n\n    return RoutePlayer;\n}(Eventable(Class));\n\nRoutePlayer.mergeOptions(options);\n\nexport { Route, RoutePlayer };\n\ntypeof console !== 'undefined' && console.log('maptalks.routeplayer v0.1.0, requires maptalks@^0.23.0.');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/maptalks.routeplayer/dist/maptalks.routeplayer.es.js\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <div id=\"map\"></div>\n    <div @click=\"play\">开始</div>\n    <button @click=\"pause\">暂停</button>\n    <button @click=\"cancel\">重新开始</button>\n    <button @click=\"speed\">加速</button>\n    <button @click=\"speed1\">减速</button>\n  </div>\n</template>\n\n<script>\nimport * as maptalks from \"maptalks\";\nimport { RoutePlayer } from \"maptalks.routeplayer\";\nexport default {\n  data() {\n    return {\n      map: null,\n      player:null,\n      mapconfig: {\n        zoom: 12,\n        center: [121.475031060928, 31.2611187865471]\n      }\n    };\n  },\n  mounted() {\n    this.$nextTick(function() {\n      // DOM 更新了\n      this.initmap();\n      this.createRouter()\n    });\n  },\n  methods: {\n    initmap() {\n      var vm = this;\n      vm.map = new maptalks.Map(\"map\", {\n        center: vm.mapconfig.center,\n        zoom: vm.mapconfig.zoom,\n        baseLayer: new maptalks.TileLayer(\"base\", {\n          urlTemplate:\n            \"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png\",\n          subdomains: [\"a\", \"b\", \"c\", \"d\"],\n          attribution:\n            '&copy; <a href=\"http://osm.org\">OpenStreetMap</a> contributors, &copy; <a href=\"https://carto.com/\">CARTO</a>'\n        })\n      });\n    },\n    createRouter() {\n      var route = [\n        {\n          path: [\n            //[x, y, time]\n            [121.475031060928, 31.2611187865471, 301000],\n            [121.47940842604, 31.263466566376, 541000],\n            [121.47940842604, 31.273466566376, 851000]\n          ],\n          //marker's symbol\n          markerSymbol: null,\n          //route line's symbol\n          lineSymbol: { lineColor: \"#f00\" }\n        }\n      ];\n       this.player = new RoutePlayer(route, this.map);\n       var unitTime = this.player.getUnitTime();\n       console.log(unitTime)\n    },\n    play() {\n      this.player.play();\n    },\n    pause(){\n        this.player.pause();\n    },\n    cancel(){\n        this.player.cancel();\n    },\n    speed(){\n\n    },\n    speed1(){\n        \n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#map {\n  width: 100%;\n  height: 500px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/map/maptalks/routerplay.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"map\"}}),_vm._v(\" \"),_c('div',{on:{\"click\":_vm.play}},[_vm._v(\"开始\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.pause}},[_vm._v(\"暂停\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.cancel}},[_vm._v(\"重新开始\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.speed}},[_vm._v(\"加速\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.speed1}},[_vm._v(\"减速\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c9baff22\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/map/maptalks/routerplay.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c9baff22\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./routerplay.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./routerplay.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./routerplay.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c9baff22\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./routerplay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c9baff22\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/map/maptalks/routerplay.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}